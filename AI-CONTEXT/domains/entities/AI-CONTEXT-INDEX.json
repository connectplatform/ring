{
  "schema_version": "1.0",
  "context_version": 1,
  "name": "ring-entities",
  "object_type": "domain",
  "aliases": ["Entities"],
  "updated": "2025-08-08",
  "generated_at": "2025-08-08T00:00:00Z",
  "status": "PRODUCTION_READY",
  "maturity": "ga",
  "criticality": "P2",
  "lifecycle": "active",
  "tags": ["entities", "content"],
  "owner": {"team": "platform-core", "maintainers": ["frontend@technoring"], "channel": "#techno-platform"},
  "location": {
    "repo_root": "/Users/insight/code/technoring",
    "path": "ring",
    "related_paths": ["ring/services/entities", "ring/app/api/entities", "ring/lib/firestore-collections.ts"]
  },
  "purpose": "Manage professional organization entities with tiered visibility and verification.",
  "responsibilities": [
    "CRUD for entities with access tiers",
    "Search/filter entities",
    "Visibility and verification enforcement"
  ],
  "non_goals": ["Opportunity management", "User profile management"],
  "dependencies": {
    "runtime": ["firebase-admin", "zod"],
    "intra_repo": ["ring/lib/firestore-collections"],
    "external_services": ["Firestore"]
  },
  "interfaces": {
    "public_apis": [
      "GET/POST /api/entities",
      "GET/PUT/DELETE /api/entities/[id]",
      "GET /api/entities/upload (file handling)"
    ],
    "cli": [],
    "events": []
  },
  "configuration": {
    "env": ["AUTH_FIREBASE_PROJECT_ID", "AUTH_FIREBASE_CLIENT_EMAIL", "AUTH_FIREBASE_PRIVATE_KEY"],
    "files": ["ring/env.local.template", "ring/lib/firestore-collections.ts"],
    "feature_flags": []
  },
  "data_models": [
    {"name": "Entity", "storage": "firestore", "collections_or_tables": ["entities"]},
    {"name": "Indexes", "storage": "firestore", "collections_or_tables": ["visibility+type+name (see firestore.indexes.json)"]}
  ],
  "operations": {
    "start": "npm run dev",
    "stop": "CTRL+C",
    "health_check": "GET /api/entities responds 200",
    "run_commands": ["npm run dev"],
    "health_signals": ["entities_list_loaded"],
    "smoke_tests": ["curl -s http://localhost:3000/api/entities"]
  },
  "logging": {"files": [], "events": ["entity_created", "entity_updated", "entity_deleted"], "metrics": []},
  "errors": {
    "common": [
      {"message": "Permission denied", "cause": "Insufficient role/tier", "fix": "Authenticate and ensure role meets access tier"},
      {"message": "Converter mismatch", "cause": "Type mismatch with Firestore converters", "fix": "Align with entityConverter"}
    ],
    "troubleshooting": ["Check middleware role logs", "Verify Firestore rules and indexes"]
  },
  "security": {
    "authn": "Auth.js v5 JWT",
    "authz_model": "Tiered access per entity.accessTier",
    "secrets": ["AUTH_SECRET"],
    "data_privacy": "Entity data exposure based on visibility and role"
  },
  "performance": {
    "budget": "Indexed queries with low latency",
    "benchmarks": [],
    "latency_expectations_ms": {"p50": 200, "p95": 500},
    "throughput_targets": {"rps": 0}
  },
  "tests": {
    "unit": ["ring/__tests__/api/entities"],
    "integration": ["ring/__tests__/api"],
    "how_to_run": "npm run test"
  },
  "observability": {"dashboards": [], "alerts": []},
  "recent_changes": [
    {"date": "2025-08-08", "description": "Added AI context for entities domain", "impact": "AI-first documentation"}
  ],
  "related_context_files": ["ring/AI-CONTEXT/AI-CONTEXT-INDEX.json", "ring/docs/AI-ASSISTANT-ONBOARDING.md"],
  "links": {
    "docs": ["ring/docs/SYSTEM-ARCHITECTURE.md"],
    "code": ["ring/services/entities", "ring/app/api/entities", "ring/lib/firestore-collections.ts"],
    "diagrams": [],
    "tickets": []
  }
}


