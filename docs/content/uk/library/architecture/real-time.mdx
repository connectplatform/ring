---
title: Real Time
description: Real Time documentation for Ring Platform
---

# Tunnel Transport System

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ real-time –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó –∑ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—î—é —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —à–∞—Ä—É, –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –º–Ω–æ–∂–∏–Ω–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤ —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –≤–∏–±–æ—Ä–æ–º –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—É –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è.

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ Tunnel Transport

### –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏
- **WebSocket** - Primary transport –¥–ª—è Kubernetes deployments
- **Server-Sent Events (SSE)** - Primary transport –¥–ª—è Vercel Edge Runtime
- **Long Polling** - Fallback transport –¥–ª—è restrictive environments
- **Supabase Realtime** - Cloud-native real-time –¥–ª—è Supabase deployments
- **Firebase RTDB** - Legacy Firebase real-time database
- **Pusher/Ably** - Third-party real-time services

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –í–∏–±—ñ—Ä –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç—É
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –¥–µ—Ç–µ–∫—Ü—ñ—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —Ç–∞ –≤–∏–±—ñ—Ä —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—É

<Code language="typescript" title="TypeScript">
{`const transportConfig = {
  vercel: { primary: 'sse', fallback: 'polling' },
  kubernetes: { primary: 'websocket', fallback: 'sse' },
  supabase: { primary: 'supabase', fallback: 'polling' },
  firebase: { primary: 'firebase', fallback: 'polling' }
}`}
</Code>

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –°–∏—Å—Ç–µ–º–∏
<Mermaid>
{`flowchart TD
    subgraph "Client Layer"
        C[üì± Client Application]
        TM[Tunnel Manager]
        C --> TM
    end

    subgraph "Transport Layer"
        TM --> WS[üîå WebSocket Transport]
        TM --> SSE[üì° SSE Transport]
        TM --> LP[üîÑ Long Polling Transport]
        TM --> SB[‚òÅÔ∏è Supabase Transport]
    end

    subgraph "Service Layer"
        WS --> TS[Tunnel Server]
        SSE --> TS
        LP --> TS
        SB --> TS

        TS --> RM[üì® Real-time Manager]
        RM --> PS[üë• Presence Service]
        RM --> NS[üîî Notification Service]
        RM --> MS[üí¨ Messaging Service]
    end

    subgraph "Database Layer"
        RM --> PG[(üóÑÔ∏è PostgreSQL)]
        RM --> RD[(üî¥ Redis Cache)]
    end

    subgraph "External Services"
        RM --> FCM[üì± FCM Push]
        RM --> EM[üìß Email Service]
    end`}
</Mermaid>

## –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ñ –ü—Ä–æ—Ç–æ–∫–æ–ª–∏

### Unified Message Protocol
<Code language="typescript" title="interface TunnelMessage {">
{`id: string
  type: TunnelMessageType
  payload: any
  timestamp: number
  userId?: string
  sessionId: string
  metadata?: Record<string, any>
}

enum TunnelMessageType {
  // Data messages
  DATA = 'data',
  NOTIFICATION = 'notification',
  MESSAGE = 'message',
  PRESENCE = 'presence',

  // System messages
  HEARTBEAT = 'heartbeat',
  ACK = 'ack',
  ERROR = 'error',
  AUTH = 'auth',

  // Database events
  DB_INSERT = 'db:insert',
  DB_UPDATE = 'db:update',
  DB_DELETE = 'db:delete'
}`}
</Code>

### Connection State Management
<Code language="typescript" title="enum TunnelConnectionState {">
{`DISCONNECTED = 'disconnected',
  CONNECTING = 'connecting',
  CONNECTED = 'connected',
  RECONNECTING = 'reconnecting',
  ERROR = 'error'
}

interface ConnectionHealth {
  state: TunnelConnectionState
  latency: number
  reconnectCount: number
  lastHeartbeat: number
  errorCount: number
}`}
</Code>

## Real-time Features

### Presence System
- **Online/Offline Status** - Real-time user presence tracking
- **Typing Indicators** - Live typing status in chat
- **Activity Monitoring** - User engagement tracking
- **Room-based Presence** - Per-conversation presence

### Push Notifications
- **Firebase Cloud Messaging (FCM)** - Cross-platform push notifications
- **Web Push API** - Browser-based notifications
- **Background Sync** - Offline message delivery
- **Notification Preferences** - User-controlled notification settings

### Message Delivery
- **Guaranteed Delivery** - Message persistence and retry logic
- **Offline Support** - Message queuing for offline users
- **Read Receipts** - Message read status tracking
- **Message History** - Persistent chat history

## –ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å —Ç–∞ –ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å

### Horizontal Scaling
// Connection distribution across multiple instances

<Code language="typescript" title="TypeScript">
{`const connectionSharding = {
  shardKey: 'userId',
  shardCount: 10,
  redisPubSub: true,
  stickySessions: false
}`}
</Code>

### Fault Tolerance
- **Automatic Failover** - Transport fallback on connection failure
- **Circuit Breakers** - Protection against cascade failures
- **Rate Limiting** - DDoS protection and fair usage
- **Health Monitoring** - Real-time connection health tracking

### Performance Optimization
- **Message Batching** - Reduced network overhead
- **Compression** - Payload compression for large messages
- **Connection Pooling** - Efficient resource utilization
- **Smart Routing** - Geographic routing for global deployments

## –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑–∞ –°–µ—Ä–µ–¥–æ–≤–∏—â–∞–º–∏

### Vercel Edge Runtime
// SSE primary, WebSocket disabled

<Code language="typescript" title="TypeScript">
{`const vercelConfig = {
  transports: ['sse', 'polling'],
  heartbeatInterval: 30000,
  reconnectDelay: 1000,
  maxReconnectAttempts: 5
}`}
</Code>

### Kubernetes Production
// WebSocket primary, SSE fallback

<Code language="typescript" title="TypeScript">
{`const k8sConfig = {
  transports: ['websocket', 'sse', 'polling'],
  heartbeatInterval: 25000,
  reconnectDelay: 500,
  maxReconnectAttempts: 10,
  enableMetrics: true
}`}
</Code>

### Development Environment
// All transports enabled for testing

<Code language="typescript" title="TypeScript">
{`const devConfig = {
  transports: ['websocket', 'sse', 'polling', 'supabase'],
  debugMode: true,
  heartbeatInterval: 10000,
  mockLatency: 100 // For testing
}`}
</Code>

## –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞

### Connection Metrics
- **Active Connections** - Real-time connection count
- **Message Throughput** - Messages per second
- **Latency Distribution** - P50, P95, P99 latency metrics
- **Error Rates** - Connection failure rates

### Performance Dashboards
- **Grafana Dashboards** - Real-time monitoring
- **Prometheus Metrics** - Time-series data collection
- **Alert Manager** - Automated alerting for issues
- **Log Aggregation** - Centralized logging system

---

**‚ö° Production-Ready Real-time System**

Ring Platform implements enterprise-grade real-time communication with multiple transport fallbacks, comprehensive monitoring, and automatic scaling capabilities.
